### Test dell'API Search Service

### Test Health Check
GET http://localhost:3003/health

### Test Ricerca Base - Tutte le proprietà attive
POST http://localhost:3003/search
Content-Type: application/json

{
  "page": 1,
  "limit": 20,
  "sortBy": "relevance"
}

### Test Ricerca per Città
POST http://localhost:3003/search
Content-Type: application/json

{
  "city": "Milano",
  "page": 1,
  "limit": 10,
  "sortBy": "price_asc"
}

### Test Ricerca per Tipo Proprietà e Range Prezzo
POST http://localhost:3003/search
Content-Type: application/json

{
  "propertyType": "apartment",
  "listingType": "sale",
  "priceMin": 200000,
  "priceMax": 500000,
  "bedrooms": 2,
  "page": 1,
  "limit": 15
}

### Test Ricerca Geografica (raggio)
POST http://localhost:3003/search
Content-Type: application/json

{
  "centerLat": 45.4642,
  "centerLng": 9.1900,
  "radius": 5,
  "page": 1,
  "limit": 20
}

### Test Ricerca Avanzata con Filtri Multipli
POST http://localhost:3003/search
Content-Type: application/json

{
  "query": "centro storico",
  "city": "Milano",
  "propertyType": "apartment",
  "listingType": "sale",
  "priceMin": 300000,
  "priceMax": 800000,
  "bedrooms": 3,
  "bathrooms": 2,
  "areaMin": 80,
  "areaMax": 150,
  "hasElevator": true,
  "hasBalcony": true,
  "energyClass": "B",
  "features": ["aria condizionata", "ristrutturato"],
  "sortBy": "price_desc",
  "page": 1,
  "limit": 10
}

### Test Suggerimenti di Ricerca - Locations
GET http://localhost:3003/search/suggestions?query=Mil&type=location

### Test Suggerimenti di Ricerca - Property Types
GET http://localhost:3003/search/suggestions?query=apart&type=property_type

### Test Suggerimenti di Ricerca - Features
GET http://localhost:3003/search/suggestions?query=aria&type=feature

### Test Validazione - Parametri Invalidi (dovrebbe fallire)
POST http://localhost:3003/search
Content-Type: application/json

{
  "priceMin": 500000,
  "priceMax": 300000,
  "page": -1,
  "limit": 150
}

### Test Validazione - Ricerca Geografica Incompleta (dovrebbe fallire)
POST http://localhost:3003/search
Content-Type: application/json

{
  "centerLat": 45.4642,
  "radius": 5
}

### Test Suggerimenti - Query Troppo Corta
GET http://localhost:3003/search/suggestions?query=M&type=location

### Test Storico Ricerche
GET http://localhost:3003/search/history?page=1&limit=20
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlYzkwNGUyMS1hNDQwLTRjNDMtYjk1OS01NTIyMWNlYjViMjUiLCJlbWFpbCI6Imx1Y2EuYmlhbmNvQGV4YW1wbGUuY29tIiwicm9sZSI6ImNsaWVudCIsImlhdCI6MTc1ODk5MTA4OSwiZXhwIjoxNzU4OTk0Njg5fQ.Pd8iMwH0Mp3Lmi6ocYiZT2zB5Ys9FMsyMfs6Q4xXC3U

### Test Ricerca con Autenticazione
POST http://localhost:3003/search
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlYzkwNGUyMS1hNDQwLTRjNDMtYjk1OS01NTIyMWNlYjViMjUiLCJlbWFpbCI6Imx1Y2EuYmlhbmNvQGV4YW1wbGUuY29tIiwicm9sZSI6ImNsaWVudCIsImlhdCI6MTc1ODk5MTA4OSwiZXhwIjoxNzU4OTk0Njg5fQ.Pd8iMwH0Mp3Lmi6ocYiZT2zB5Ys9FMsyMfs6Q4xXC3U
Content-Type: application/json

{
  "city": "Milano",
  "page": 1,
  "limit": 10,
  "sortBy": "price_asc"
}

### Test Salvataggio Ricerca
POST http://localhost:3003/search/saved
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlYzkwNGUyMS1hNDQwLTRjNDMtYjk1OS01NTIyMWNlYjViMjUiLCJlbWFpbCI6Imx1Y2EuYmlhbmNvQGV4YW1wbGUuY29tIiwicm9sZSI6ImNsaWVudCIsImlhdCI6MTc1ODk5MTA4OSwiZXhwIjoxNzU4OTk0Njg5fQ.Pd8iMwH0Mp3Lmi6ocYiZT2zB5Ys9FMsyMfs6Q4xXC3U
Content-Type: application/json

{
  "name": "Appartamenti Milano Centro",
  "filters": {
    "city": "Milano",
    "propertyType": "apartment",
    "priceMin": 300000,
    "priceMax": 600000
  },
  "isNotificationEnabled": true
}

### Test Ricerche Salvate
GET http://localhost:3003/search/saved
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlYzkwNGUyMS1hNDQwLTRjNDMtYjk1OS01NTIyMWNlYjViMjUiLCJlbWFpbCI6Imx1Y2EuYmlhbmNvQGV4YW1wbGUuY29tIiwicm9sZSI6ImNsaWVudCIsImlhdCI6MTc1ODk5MTA4OSwiZXhwIjoxNzU4OTk0Njg5fQ.Pd8iMwH0Mp3Lmi6ocYiZT2zB5Ys9FMsyMfs6Q4xXC3U

### Modifica Ricerca Salvata
PUT http://localhost:3003/search/saved/40b6d96f-47be-4dbc-9053-cd3112f4a5e4
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlYzkwNGUyMS1hNDQwLTRjNDMtYjk1OS01NTIyMWNlYjViMjUiLCJlbWFpbCI6Imx1Y2EuYmlhbmNvQGV4YW1wbGUuY29tIiwicm9sZSI6ImNsaWVudCIsImlhdCI6MTc1ODk5MTA4OSwiZXhwIjoxNzU4OTk0Njg5fQ.Pd8iMwH0Mp3Lmi6ocYiZT2zB5Ys9FMsyMfs6Q4xXC3U
Content-Type: application/json

{
  "name": "Appartamenti Milano Centro Aggiornati",
  "filters": {
    "city": "Milano",
    "propertyType": "apartment",
    "priceMin": 350000,
    "priceMax": 650000,
    "bedrooms": 2
  },
  "isNotificationEnabled": false
}

### Elimina Ricerca Salvata
DELETE http://localhost:3003/search/saved/40b6d96f-47be-4dbc-9053-cd3112f4a5e4
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlYzkwNGUyMS1hNDQwLTRjNDMtYjk1OS01NTIyMWNlYjViMjUiLCJlbWFpbCI6Imx1Y2EuYmlhbmNvQGV4YW1wbGUuY29tIiwicm9sZSI6ImNsaWVudCIsImlhdCI6MTc1ODk5MTA4OSwiZXhwIjoxNzU4OTk0Njg5fQ.Pd8iMwH0Mp3Lmi6ocYiZT2zB5Ys9FMsyMfs6Q4xXC3U

