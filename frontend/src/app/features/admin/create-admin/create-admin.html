<app-auth-layout [config]="authConfig">
  <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
    <div class="form-fields">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nome</mat-label>
        <input matInput 
               formControlName="firstName" 
               placeholder="Es: Mario"
               required>
        <mat-icon matSuffix>person</mat-icon>
        <mat-error>{{ getErrorMessage('firstName') }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Cognome</mat-label>
        <input matInput 
               formControlName="lastName" 
               placeholder="Es: Rossi"
               required>
        <mat-icon matSuffix>person</mat-icon>
        <mat-error>{{ getErrorMessage('lastName') }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput 
               type="email"
               formControlName="email" 
               placeholder="esempio@dominio.it"
               required>
        <mat-icon matSuffix>email</mat-icon>
        <mat-error>{{ getErrorMessage('email') }}</mat-error>
        <mat-hint>L'amministratore riceverà le credenziali a questo indirizzo</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Telefono (opzionale)</mat-label>
        <input matInput 
               type="tel"
               formControlName="phone" 
               placeholder="+391234567890">
        <mat-icon matSuffix>phone</mat-icon>
        <mat-error>{{ getErrorMessage('phone') }}</mat-error>
      </mat-form-field>
    </div>

    <div class="info-box">
      <mat-icon>info</mat-icon>
      <div>
        <p><strong>Nota:</strong> L'amministratore riceverà un'email con le istruzioni per impostare la password e accedere al sistema.</p>
      </div>
    </div>

    <div class="form-actions">
      <button mat-button 
              type="button" 
              (click)="goBack()"
              [disabled]="isLoading()">
        <mat-icon>arrow_back</mat-icon>
        Annulla
      </button>
      <button mat-raised-button 
              color="primary" 
              type="submit"
              class="submit-button"
              [disabled]="!adminForm.valid || isLoading()">
        @if (isLoading()) {
          <ng-container>
            <mat-icon class="spin">refresh</mat-icon>
            Creazione in corso...
          </ng-container>
        } @else {
          <ng-container>
            <mat-icon>add</mat-icon>
            Crea Amministratore
          </ng-container>
        }
      </button>
    </div>
  </form>
</app-auth-layout>
