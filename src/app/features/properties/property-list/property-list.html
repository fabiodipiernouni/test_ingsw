<div class="property-list-container">
  @if (properties().length > 0) {
    <div class="results-header">
      <div class="results-count">
        <mat-icon>home_work</mat-icon>
        <h2>{{ properties().length }} immobili trovati</h2>
      </div>

      <div class="results-actions">
        <button mat-icon-button title="Vista griglia" class="view-toggle active">
          <mat-icon>view_module</mat-icon>
        </button>
        <button mat-icon-button title="Vista lista" class="view-toggle">
          <mat-icon>view_list</mat-icon>
        </button>
      </div>
    </div>

    <div class="property-grid">
      @for (prop of properties(); track prop.id) {
        <!--   TODO       [property]="prop"-->
        <app-property-card
          (propertyClick)="onPropertyClick($event)">
        </app-property-card>
      }
    </div>

    @if (properties().length >= 20) {
      <div class="load-more-section">
        <button mat-raised-button
                color="primary"
                class="load-more-button">
          <mat-icon>expand_more</mat-icon>
          Carica altri immobili
        </button>
        <p class="load-more-info">
          Mostrando {{ properties().length }} di oltre 1000 immobili
        </p>
      </div>
    }
  } @else {
    <div class="empty-state">
      <div class="empty-icon">
        <mat-icon>home_work</mat-icon>
      </div>
      <h3>Nessun immobile trovato</h3>
      <p>
        Prova a modificare i filtri di ricerca per trovare più risultati.
        <br>
        Puoi ampliare la zona di ricerca o rimuovere alcuni filtri.
      </p>
      <div class="empty-suggestions">
        <h4>Suggerimenti:</h4>
        <ul>
          <li>Verifica l'ortografia della località</li>
          <li>Prova con una zona più ampia</li>
          <li>Rimuovi alcuni filtri specifici</li>
          <li>Aumenta la fascia di prezzo</li>
        </ul>
      </div>
      <button mat-raised-button
              color="primary"
              onclick="window.history.back()">
        <mat-icon>arrow_back</mat-icon>
        Modifica Ricerca
      </button>
    </div>
  }
</div>
